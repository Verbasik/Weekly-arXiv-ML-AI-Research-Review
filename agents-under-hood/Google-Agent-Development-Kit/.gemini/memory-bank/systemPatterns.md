# System Patterns: AI Git Assistant

## 1. Архитектура

Проект будет построен на основе **агентной архитектуры**, где каждый агент отвечает за свою четко определенную задачу. Это обеспечивает модульность и расширяемость системы.

## 2. Ключевые агенты

1.  **CLI-агент (Точка входа)**:
    - Отвечает за парсинг аргументов командной строки (путь к проекту).
    - Инициирует рабочий процесс.
    - Управляет выводом информации для пользователя.

2.  **Git-агент (Исполнитель)**:
    - Выполняет команды Git (`add`, `diff`, `commit`, `push`).
    - Обрабатывает вывод команд и возможные ошибки (например, если директория не является Git-репозиторием).
    - Предоставляет `diff` для анализа.

3.  **Commit-генератор (Аналитический агент)**:
    - Ядро системы. Получает на вход `diff` от Git-агента.
    - Формирует промпт для модели Gemini, запрашивая генерацию сообщения для коммита в заданном формате (например, Conventional Commits).
    - Получает ответ от API и передает его Git-агенту.

## 3. Поток данных (Data Flow)

```mermaid
graph TD
    A[Пользователь запускает CLI] --> B{1. CLI-агент};
    B -- Путь к проекту --> C{2. Git-агент};
    C -- git add . --> C;
    C -- git diff --> D{3. Commit-генератор};
    D -- diff --> E[Gemini API];
    E -- Сгенерированное сообщение --> D;
    D -- Готовое сообщение --> C;
    C -- git commit -m "..." --> C;
    C -- git push --> F[Удаленный репозиторий];
    C -- Статус выполнения --> B;
    B -- Вывод результата --> A;
```

## 4. Шаблоны проектирования

- **Chain of Responsibility**: Каждый агент выполняет свою часть работы и передает управление следующему.
- **Strategy**: Генерация промпта для разных типов изменений (фикс, фича, рефакторинг) может быть вынесена в отдельные стратегии.
