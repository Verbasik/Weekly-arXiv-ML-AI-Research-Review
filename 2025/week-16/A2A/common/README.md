# A2A: Agent-to-Agent API

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![Python](https://img.shields.io/badge/python-3.7+-green)
![License](https://img.shields.io/badge/license-MIT-yellow)

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

A2A (Agent-to-Agent) ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –∏ –≥–∏–±–∫—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **JSON-RPC 2.0 API** –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Server-Sent Events (SSE)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞, –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á
- ‚úÖ **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ JWT
- ‚úÖ **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

A2A –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏:

- **–ö–ª–∏–µ–Ω—Ç (A2AClient)** ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API –∞–≥–µ–Ω—Ç–æ–≤
- **–°–µ—Ä–≤–µ—Ä (A2AServer)** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **–ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≥–µ–Ω—Ç–∞ (AgentCard)** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–∞
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á (TaskManager)** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á

–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. –ö–ª–∏–µ–Ω—Ç –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –µ–≥–æ –∫–∞—Ä—Ç–æ—á–∫—É
2. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –∞–≥–µ–Ω—Ç—É
3. –°–µ—Ä–≤–µ—Ä –∞–≥–µ–Ω—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É
4. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç, –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É –∏–ª–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

#### A2AClient

–ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Agent-to-Agent API. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–¥–∞—á, –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.

```python
from common.client import A2AClient
from common.client import A2ACardResolver

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–≥–µ–Ω—Ç–∞
resolver = A2ACardResolver("http://localhost:8001")
agent_card = resolver.get_agent_card()

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
client = A2AClient(agent_card=agent_card)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏
response = await client.send_task({
    "id": "task123",
    "sessionId": "session456",
    "message": {"text": "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"}
})

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
task_status = await client.get_task({"id": "task123"})
```

#### A2ACardResolver

–ö–ª–∞—Å—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ (–∫–∞—Ä—Ç–æ—á–µ–∫) —á–µ—Ä–µ–∑ –∏—Ö API.

```python
from common.client import A2ACardResolver

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–æ–ª–≤–µ—Ä–∞
resolver = A2ACardResolver("http://localhost:8001")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–≥–µ–Ω—Ç–∞
agent_card = resolver.get_agent_card()
print(f"–ò–º—è –∞–≥–µ–Ω—Ç–∞: {agent_card.name}")
print(f"–û–ø–∏—Å–∞–Ω–∏–µ: {agent_card.description}")
```

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

#### A2AServer

–°–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ Agent-to-Agent API. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏ –ø–æ—Ç–æ–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏.

```python
from common.server import A2AServer
from common.server import InMemoryTaskManager
from common.types  import AgentCard, AgentCapabilities, AgentSkill

# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á
task_manager = InMemoryTaskManager()

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–≥–µ–Ω—Ç–∞
agent_card = AgentCard(
    name="MyAgent",
    url="http://localhost:5000",
    version="1.0.0",
    capabilities=AgentCapabilities(streaming=True, pushNotifications=True),
    skills=[
        AgentSkill(
            id="calculator",
            name="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä",
            description="–í—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã"
        )
    ]
)

# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
server = A2AServer(
    host="0.0.0.0",
    port=5000,
    agent_card=agent_card,
    task_manager=task_manager
)
server.start()
```

#### TaskManager –∏ InMemoryTaskManager

–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏ –µ–≥–æ –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á.

```python
from common.server import InMemoryTaskManager
from common.types  import TaskState, TaskStatus, Message, TextPart

class MyTaskManager(InMemoryTaskManager):
    async def on_send_task(self, request):
        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
        task_params = request.params
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
        task = await self.upsert_task(task_params)
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
        task = await self.update_store(
            task.id,
            TaskStatus(
                state=TaskState.COMPLETED,
                message=Message(
                    role="agent",
                    parts=[TextPart(text="–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")]
                )
            ),
            None  # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
        )
        
        # –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞
        return self.create_response(request.id, task)
```

### –£—Ç–∏–ª–∏—Ç—ã

#### InMemoryCache

–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π Singleton-–∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –∫—ç—à–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TTL.

```python
from common.utils.in_memory_cache import InMemoryCache

# –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫—ç—à–∞
cache = InMemoryCache()

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
cache.set("user_profile", {"name": "John", "age": 30})
cache.set("session_token", "abc123", ttl=3600)  # –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 1 —á–∞—Å

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
profile = cache.get("user_profile")
token = cache.get("session_token", "default_token")

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
cache.delete("session_token")

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫—ç—à–∞
cache.clear()
```

#### PushNotificationAuth

–ö–ª–∞—Å—Å—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø—Ä–∏–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT.

```python
from common.utils.push_notification_auth import PushNotificationSenderAuth

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
sender = PushNotificationSenderAuth()
sender.generate_jwk()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ URL –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
is_valid = await PushNotificationSenderAuth.verify_push_notification_url(
    "https://example.com/webhook"
)

# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
success = await sender.send_push_notification(
    "https://example.com/webhook",
    {"event": "update", "id": "task123"}
)
```

## üìö API Reference

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã

- `A2AClient` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API –∞–≥–µ–Ω—Ç–æ–≤
- `A2ACardResolver` - –ö–ª–∞—Å—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∞–≥–µ–Ω—Ç–æ–≤

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã

- `A2AServer` - –°–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ API
- `TaskManager` - –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
- `InMemoryTaskManager` - –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

- `Message` - –°–æ–æ–±—â–µ–Ω–∏–µ, –æ–±–º–µ–Ω–∏–≤–∞–µ–º–æ–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∞–≥–µ–Ω—Ç–æ–º
- `Task` - –ó–∞–¥–∞—á–∞ –≤ —Ä–∞–º–∫–∞—Ö A2A API
- `TaskStatus` - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `Artifact` - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –∞–≥–µ–Ω—Ç–æ–º
- `AgentCard` - –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≥–µ–Ω—Ç–∞ —Å –µ–≥–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### –£—Ç–∏–ª–∏—Ç—ã

- `InMemoryCache` - –ö–ª–∞—Å—Å –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏
- `PushNotificationSenderAuth` - –ö–ª–∞—Å—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `PushNotificationReceiverAuth` - –ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–∏–µ–º–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- Pydantic
- Starlette
- httpx
- jwt
- jwcrypto